2023-07-20 17:05:47.998 -05:00 [INF] Entity Framework Core 6.0.10 initialized 'TicketsContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.10' with options: MigrationsHistoryTable=_MigrationHistory 
2023-07-20 17:05:48.253 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-07-20 17:05:48.275 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[_MigrationHistory]');
2023-07-20 17:05:48.279 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-07-20 17:05:48.281 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[_MigrationHistory]');
2023-07-20 17:05:48.299 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [_MigrationHistory]
ORDER BY [MigrationId];
2023-07-20 17:05:48.313 -05:00 [INF] Applying migration '20230219043136_first migration'.
2023-07-20 17:05:48.371 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [sq_ticket_code] START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2023-07-20 17:05:48.375 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TicketStatus] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [BackgroundColor] nvarchar(max) NOT NULL,
    [Color] nvarchar(max) NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [CreatedOn] datetime2 NOT NULL DEFAULT '2023-02-18T23:31:36.1659350-05:00',
    [LastModifiedBy] nvarchar(max) NULL,
    [LastModifiedOn] datetime2 NOT NULL DEFAULT '2023-02-18T23:31:36.1659933-05:00',
    [Status] bit NOT NULL,
    CONSTRAINT [PK_TicketStatus] PRIMARY KEY ([Id])
);
2023-07-20 17:05:48.379 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Ticket] (
    [Id] uniqueidentifier NOT NULL,
    [Code] int NOT NULL,
    [Title] nvarchar(50) NOT NULL,
    [TicketStatusId] uniqueidentifier NOT NULL,
    [GeneratedBy] nvarchar(max) NOT NULL,
    [GeneratedOn] datetime2 NOT NULL,
    [SolvedOn] datetime2 NOT NULL,
    [AllegedSolveDate] datetime2 NOT NULL,
    [Description] nvarchar(max) NULL,
    [AssignedTo] nvarchar(max) NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    [LastModifiedOn] datetime2 NOT NULL,
    [Status] bit NOT NULL,
    CONSTRAINT [PK_Ticket] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Ticket_TicketStatus_TicketStatusId] FOREIGN KEY ([TicketStatusId]) REFERENCES [TicketStatus] ([Id]) ON DELETE CASCADE
);
2023-07-20 17:05:48.383 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [TicketDetail] (
    [Id] uniqueidentifier NOT NULL,
    [TicketId] uniqueidentifier NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [TicketCode] int NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    [LastModifiedOn] datetime2 NOT NULL,
    [Status] bit NOT NULL,
    CONSTRAINT [PK_TicketDetail] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TicketDetail_Ticket_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [Ticket] ([Id]) ON DELETE CASCADE
);
2023-07-20 17:05:48.387 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Attachment] (
    [Id] uniqueidentifier NOT NULL,
    [Url] nvarchar(max) NOT NULL,
    [TicketDetailId] uniqueidentifier NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [CreatedOn] datetime2 NOT NULL,
    [LastModifiedBy] nvarchar(max) NULL,
    [LastModifiedOn] datetime2 NOT NULL,
    [Status] bit NOT NULL,
    CONSTRAINT [PK_Attachment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Attachment_TicketDetail_TicketDetailId] FOREIGN KEY ([TicketDetailId]) REFERENCES [TicketDetail] ([Id]) ON DELETE CASCADE
);
2023-07-20 17:05:48.403 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'BackgroundColor', N'Color', N'CreatedBy', N'CreatedOn', N'Description', N'LastModifiedBy', N'Name', N'Status') AND [object_id] = OBJECT_ID(N'[TicketStatus]'))
    SET IDENTITY_INSERT [TicketStatus] ON;
INSERT INTO [TicketStatus] ([Id], [BackgroundColor], [Color], [CreatedBy], [CreatedOn], [Description], [LastModifiedBy], [Name], [Status])
VALUES ('504731d4-0a34-41d5-9b0b-0611b3f76777', N'#c8e6c9', N'#256029', N'AutoGenerated', '2023-02-18T23:31:36.1658971-05:00', N'Estado del ticket resuelto', N'AutoGenerated', N'Resuelto', CAST(1 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'BackgroundColor', N'Color', N'CreatedBy', N'CreatedOn', N'Description', N'LastModifiedBy', N'Name', N'Status') AND [object_id] = OBJECT_ID(N'[TicketStatus]'))
    SET IDENTITY_INSERT [TicketStatus] OFF;
2023-07-20 17:05:48.406 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attachment_TicketDetailId] ON [Attachment] ([TicketDetailId]);
2023-07-20 17:05:48.408 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Ticket_Code] ON [Ticket] ([Code]);
2023-07-20 17:05:48.410 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Ticket_TicketStatusId] ON [Ticket] ([TicketStatusId]);
2023-07-20 17:05:48.411 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TicketDetail_TicketId] ON [TicketDetail] ([TicketId]);
2023-07-20 17:05:48.413 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [_MigrationHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230219043136_first migration', N'6.0.10');
2023-07-20 17:05:48.418 -05:00 [INF] Applying migration '20230617230538_sqlexpress added'.
2023-07-20 17:05:48.449 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[TicketStatus]') AND [c].[name] = N'LastModifiedOn');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [TicketStatus] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [TicketStatus] ADD DEFAULT '2023-06-17T18:05:37.8644968-05:00' FOR [LastModifiedOn];
2023-07-20 17:05:48.463 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[TicketStatus]') AND [c].[name] = N'CreatedOn');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [TicketStatus] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [TicketStatus] ADD DEFAULT '2023-06-17T18:05:37.8643679-05:00' FOR [CreatedOn];
2023-07-20 17:05:48.467 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [TicketStatus] SET [CreatedOn] = '2023-06-17T18:05:37.8642917-05:00'
WHERE [Id] = '504731d4-0a34-41d5-9b0b-0611b3f76777';
SELECT @@ROWCOUNT;
2023-07-20 17:05:48.469 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [_MigrationHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230617230538_sqlexpress added', N'6.0.10');
2023-07-20 17:05:48.471 -05:00 [INF] Applying migration '20230720220512_Initial'.
2023-07-20 17:05:48.487 -05:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[TicketStatus]') AND [c].[name] = N'LastModifiedOn');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [TicketStatus] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [TicketStatus] ADD DEFAULT '2023-07-20T17:05:12.1742145-05:00' FOR [LastModifiedOn];
2023-07-20 17:05:48.500 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[TicketStatus]') AND [c].[name] = N'CreatedOn');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [TicketStatus] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [TicketStatus] ADD DEFAULT '2023-07-20T17:05:12.1741609-05:00' FOR [CreatedOn];
2023-07-20 17:05:48.503 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE [TicketStatus] SET [CreatedOn] = '2023-07-20T17:05:12.1741265-05:00'
WHERE [Id] = '504731d4-0a34-41d5-9b0b-0611b3f76777';
SELECT @@ROWCOUNT;
2023-07-20 17:05:48.505 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [_MigrationHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230720220512_Initial', N'6.0.10');
